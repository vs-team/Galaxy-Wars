module Zombie

open "UnityEngine.dll"
open UnityEngine

entity GroupZombie = { 
  inherit UnityGroup
  ZombieFollowers : [Zombie]
  ZombieLeader : Option<Zombie>

  rule ZombieLeader = 
    let leader = new Zombie(U_ZombieLeader)
    yield Some leader
    yield None
    wait false

  rule ZombieFollowers = 
    let z = 
      [for a in U_Zombies do
       select (new Zombie(a))] 
    yield z  
    yield []
    wait false

  Create(sps : Vector3, amount : int) =
  {
    Base = UnityGroup.Instantiate(sps, amount)
    ZombieFollowers = []
    ZombieLeader = None
  }
}

entity Zombie = {
  inherit UnityZombie2

  rule Dest =
    wait not Dead
    yield world.Jeep.Value.Position 

  Create(trans : Transform) = 
  { 
  Base = UnityZombie2.Find(trans)
  }
}